{"version":3,"sources":["app/views/extra-kits/ImageCropper/cropImage.js","app/views/extra-kits/ImageCropper/ImageCropper.js","app/views/extra-kits/AppImageCropper.jsx"],"names":["createImage","url","Promise","resolve","reject","image","Image","addEventListener","error","setAttribute","src","getRadianAngle","degreeValue","Math","PI","getCroppedImg","imageSrc","pixelCrop","a","rotation","canvas","document","createElement","ctx","getContext","maxSize","max","width","height","safeArea","sqrt","translate","rotate","drawImage","data","getImageData","putImageData","x","y","ImageCropper","croppedImg","setCroppedImg","againCrop","setAgainCrop","handleFileSelect","useState","crop","setCrop","setRotation","zoom","setZoom","croppedAreaPixels","setCroppedAreaPixels","onCropComplete","useCallback","croppedArea","showCroppedImage","croppedImage","convertDataUrl","toDataURL","console","className","alt","aspect","onCropChange","onRotationChange","onZoomChange","value","type","class","style","onChange","e","target","step","min","htmlFor","Button","as","id","accept","onClick","AppImageCropper","event","file","files","URL","createObjectURL"],"mappings":"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","file":"static/js/107.dc76cf17.chunk.js","sourcesContent":["const createImage = (url) =>\n  new Promise((resolve, reject) => {\n    const image = new Image();\n    image.addEventListener(\"load\", () => resolve(image));\n    image.addEventListener(\"error\", (error) => reject(error));\n    image.setAttribute(\"crossOrigin\", \"anonymous\"); // needed to avoid cross-origin issues on CodeSandbox\n    image.src = url;\n  });\n\nfunction getRadianAngle(degreeValue) {\n  return (degreeValue * Math.PI) / 180;\n}\n\n/**\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\n * @param {File} image - Image File url\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\n * @param {number} rotation - optional rotation parameter\n */\nexport default async function getCroppedImg(imageSrc, pixelCrop, rotation = 0) {\n  const image = await createImage(imageSrc);\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n\n  const maxSize = Math.max(image.width, image.height);\n  const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2));\n\n  // set each dimensions to double largest dimension to allow for a safe area for the\n  // image to rotate in without being clipped by canvas context\n  canvas.width = safeArea;\n  canvas.height = safeArea;\n\n  // translate canvas context to a central location on image to allow rotating around the center.\n  ctx.translate(safeArea / 2, safeArea / 2);\n  ctx.rotate(getRadianAngle(rotation));\n  ctx.translate(-safeArea / 2, -safeArea / 2);\n\n  // draw rotated image and store data.\n  ctx.drawImage(\n    image,\n    safeArea / 2 - image.width * 0.5,\n    safeArea / 2 - image.height * 0.5\n  );\n\n  const data = ctx.getImageData(0, 0, safeArea, safeArea);\n\n  // set canvas width to final desired crop size - this will clear existing context\n  canvas.width = pixelCrop.width;\n  canvas.height = pixelCrop.height;\n\n  // paste generated rotate image with correct offsets for x,y crop values.\n  ctx.putImageData(\n    data,\n    0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x,\n    0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y\n  );\n\n  // As Base64 string\n  // return canvas.toDataURL(\"image/jpeg\");\n  return canvas;\n}\n","import React, { useState, useCallback } from \"react\";\nimport Cropper from \"react-easy-crop\";\nimport getCroppedImg from \"./cropImage\";\nimport { Button } from \"react-bootstrap\";\n\nconst ImageCropper = ({\n  image,\n  croppedImg,\n  setCroppedImg,\n  againCrop,\n  setAgainCrop,\n  handleFileSelect,\n}) => {\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [rotation, setRotation] = useState(0);\n  const [zoom, setZoom] = useState(1);\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\n\n  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\n    setCroppedAreaPixels(croppedAreaPixels);\n  }, []);\n\n  const showCroppedImage = useCallback(async () => {\n    try {\n      const croppedImage = await getCroppedImg(\n        image,\n        croppedAreaPixels,\n        rotation\n      );\n      if (croppedImage) {\n        const convertDataUrl = croppedImage.toDataURL(\"image/jpeg\");\n        setCroppedImg(convertDataUrl);\n        setAgainCrop(true);\n        // const convertFileUrl = dataURLtoFile(convertDataUrl, \"cropped-image.jpeg\")\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [croppedAreaPixels, rotation]);\n\n  return (\n    <div>\n      <div>\n        {againCrop ? (\n          <img className=\"img-fluid\" src={croppedImg} alt=\"\" />\n        ) : (\n          <div>\n            <div className=\"cropContainer\">\n              <Cropper\n                image={image}\n                crop={crop}\n                rotation={rotation}\n                zoom={zoom}\n                aspect={4 / 4}\n                onCropChange={setCrop}\n                onRotationChange={setRotation}\n                onCropComplete={onCropComplete}\n                onZoomChange={setZoom}\n              />\n            </div>\n            <div className=\"row pt-3 mt-3\">\n              <div className=\"d-flex align-items-center col-6\">\n                <span className=\"me-3 fs-4\">ZOOM </span>\n                <input\n                  value={zoom}\n                  type=\"range\"\n                  class=\"form-range\"\n                  style={{ width: \"100%\" }}\n                  onChange={(e) => setZoom(e.target.value)}\n                  max=\"10\"\n                  step=\"0.1\"\n                />\n              </div>\n              <div className=\"d-flex align-items-center col-6\">\n                <span className=\"me-3 fs-4\">ROTATION </span>\n                <input\n                  value={rotation}\n                  type=\"range\"\n                  class=\"form-range\"\n                  style={{ width: \"100%\" }}\n                  onChange={(e) => setRotation(e.target.value)}\n                  min=\"0\"\n                  max=\"360\"\n                  step=\"1\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"d-flex align-items-center pt-3 mb-5\">\n        <div>\n          <label htmlFor=\"upload-single-file\">\n            <Button className=\"btn-rounded me-3\" as=\"span\">\n              <div className=\"flex flex-middle\">\n                <i className=\"i-Share-on-Cloud\"> </i>\n                <span>Single File</span>\n              </div>\n            </Button>\n          </label>\n          <input\n            className=\"d-none\"\n            onChange={(e) => handleFileSelect(e)}\n            id=\"upload-single-file\"\n            type=\"file\"\n            accept=\"image/*\"\n          />\n        </div>\n        <button\n          onClick={() => (againCrop ? setAgainCrop(false) : showCroppedImage())}\n          className=\"btn btn-rounded btn-primary\"\n        >\n          {againCrop ? \"Crop Again\" : \"Crop And Save\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageCropper;\n","import React, { useState } from \"react\";\nimport ImageCropper from \"./ImageCropper/ImageCropper\";\n\nconst AppImageCropper = () => {\n  const [croppedImg, setCroppedImg] = useState(null);\n  const [againCrop, setAgainCrop] = useState(false);\n\n  const handleFileSelect = (event) => {\n    let file = event.target.files[0];\n    let src = URL.createObjectURL(file);\n    setCroppedImg(src);\n  };\n\n  return (\n    <div>\n      <h3 className=\"text-primary mb-3\">Image Cropping</h3>\n      {againCrop ? (\n        <ImageCropper\n          image={croppedImg}\n          croppedImg={croppedImg}\n          setCroppedImg={setCroppedImg}\n          againCrop={againCrop}\n          setAgainCrop={setAgainCrop}\n          handleFileSelect={handleFileSelect}\n        />\n      ) : (\n        <ImageCropper\n          image={croppedImg || \"/assets/images/photo-wide-3.jpg\"}\n          croppedImg={croppedImg}\n          setCroppedImg={setCroppedImg}\n          againCrop={againCrop}\n          setAgainCrop={setAgainCrop}\n          handleFileSelect={handleFileSelect}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default AppImageCropper;\n"],"sourceRoot":""}