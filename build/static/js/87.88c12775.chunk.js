(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[87],{2244:function(e,t,a){"use strict";a.r(t);var n=a(572),r=a.n(n),c=a(595),l=a(8),i=a(9),s=a(15),o=a(16),u=a(0),p=a.n(u),m=a(548),h=a(537),d=a(170),f=a(547),g=a(2129),b=a(2115),v=a(866),y=a(34),N=a(989),E=a(790),C=a.n(E),w=a(558),S=a.n(w),x=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={invoiceList:[],shouldShowConfirmationDialog:!1,pageNumber:0,billperpage:1,year:"2021-2022",count:null},e.pageNumber=0,e.billperpage=5,e.year="2021-2022",e.handlePageClick=function(t){e.pageNumber=t.selected,e.setState({pageNumber:t.selected})},e.handleSelectCount=function(t){e.billperpage=t.target.value,e.billperpage*e.pageNumber>=e.state.count?(e.pageNumber=Math.ceil(e.state.count/e.billperpage)-1,e.setState({pageNumber:Math.ceil(e.state.count/e.billperpage)-1,billperpage:t.target.value})):e.setState({billperpage:t.target.value})},e.handleSelectYear=function(t){e.year=t.target.value,e.setState({year:t.target.value})},e.handeViewClick=function(t){console.log(t),e.props.history.push("/invoice/".concat(t))},e.handleDeleteInvoice=function(t){Object(v.b)(t).then((function(t){C.a.fire({title:"Deleted!",text:"Your file has been deleted.",type:"success",icon:"success",timer:1500}),e.setState({invoiceList:t.data,shouldShowConfirmationDialog:!1})}))},e.handleDialogClose=function(){e.setState({shouldShowConfirmationDialog:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(v.d)(this.props.companyId,this.billperpage,this.pageNumber,this.props.year,this.props.search).then((function(t){return e.setState({invoiceList:t.data.results,count:t.data.count})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.pageNumber!==this.state.pageNumber&&Object(v.d)(this.props.companyId,this.billperpage,this.pageNumber,this.props.year,this.props.search).then((function(e){return a.setState({invoiceList:e.data.results,count:e.data.count})})),t.billperpage!==this.state.billperpage&&Object(v.d)(this.props.companyId,this.billperpage,this.pageNumber,this.props.year,this.props.search).then((function(e){return a.setState({invoiceList:e.data.results,count:e.data.count})})),e.year!==this.props.year&&Object(v.d)(this.props.companyId,this.billperpage,this.pageNumber,this.props.year,this.props.search).then((function(e){return a.setState({invoiceList:e.data.results,count:e.data.count})})),e.search!==this.props.search&&Object(v.d)(this.props.companyId,this.billperpage,this.pageNumber,this.props.year,this.props.search).then((function(e){return a.setState({invoiceList:e.data.results,count:e.data.count})}))}},{key:"render",value:function(){var e=this,t=this.state.invoiceList;return p.a.createElement("div",null,p.a.createElement("div",{className:"w-100 overflow-auto"},p.a.createElement(N.a,{style:{minWidth:750}},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",{className:"px-0"},"Invoice No."),p.a.createElement("th",{className:"px-0"},"Date"),p.a.createElement("th",{className:"px-0"},"Vehicle No."),p.a.createElement("th",{className:"px-0"},"Party Name"),p.a.createElement("th",{className:"px-0"},"UOM"),p.a.createElement("th",{className:"px-0"},"Quantity"),p.a.createElement("th",{className:"px-0"},"Grand Total"),p.a.createElement("th",{className:"px-0"},"Actions"))),p.a.createElement("tbody",null,t.map((function(t,a){return p.a.createElement("tr",{key:t.id},p.a.createElement("td",{className:"pl-sm-24 capitalize",align:"left"},t.invoice_no),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.date),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.vehicle_no),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.party_name),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.total_uom),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.total_qty),p.a.createElement("td",{className:"pl-0 capitalize",align:"left"},t.total_bill_amount),p.a.createElement("td",{className:"pl-0"},p.a.createElement("i",{className:"i-Receipt-3 mr-6 font-weight-1200 text-primary cursor-pointer",onClick:function(){return e.handeViewClick(t.id)}}),p.a.createElement("span",null," "),p.a.createElement("i",{className:"i-Folder-Trash font-weight-900 text-danger cursor-pointer",onClick:function(){C.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"No"}).then((function(a){a.value&&e.handleDeleteInvoice(t)}))}})))}))))),p.a.createElement("div",{className:"row mb-3"},p.a.createElement("div",{className:"d-flex justify-content-center"},p.a.createElement("select",{id:"picker1",className:"form-control",name:"select",value:this.billperpage,onChange:this.handleSelectCount,style:{width:"4em",height:"2.5em"}},p.a.createElement("option",{value:5},"5"),p.a.createElement("option",{value:10},"10"),p.a.createElement("option",{value:25},"25"),p.a.createElement("option",{value:50},"50")),p.a.createElement("div",{className:"mt-1"},p.a.createElement(S.a,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.count/this.billperpage,marginPagesDisplayed:0,pageRangeDisplayed:2,onPageChange:function(t){e.handlePageClick(t)},containerClassName:"pagination pagination-lg",subContainerClassName:"pages pagination",activeClassName:"active",forcePage:this.pageNumber})))))}}]),a}(u.Component),k=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={invoiceList:[],partyList:[],year:"/2022-2023/",search:"",search_s:""},e.year="/2022-2023/",e.search="",e.handleSelectYear=function(t){e.setState({year:t.target.value}),e.year=t.target.value},e.handleChangeSearch=function(t){e.setState({search:t.target.value}),e.search=t.target.value},e.handleBlur=function(t){e.setState({search_s:e.search})},e.handleKeyPress=function(t){"Enter"===t.key&&e.setState({search_s:e.search})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(v.c)().then((function(e){return t.setState({partyList:e.data})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=(t.invoiceList,t.partyList);return p.a.createElement(m.a,null,p.a.createElement(h.a,null,p.a.createElement(d.a,{elevation:6,className:"invoice-details"},p.a.createElement("div",{className:"row mt-4 ms-3 me-3 mb-2 justify-content-between"},p.a.createElement("div",{className:"col-md-2"},p.a.createElement("h4",{className:"fw-bold"},"Invoice List")),p.a.createElement("div",{className:"col-md-2"},p.a.createElement("select",{id:"picker1",className:"form-control",name:"select",value:this.year,onChange:this.handleSelectYear},p.a.createElement("option",{value:"/2021-2022/"},"2021-2022"),p.a.createElement("option",{value:"/2022-2023/"},"2022-2023"))),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("input",{className:"form-control",id:"search",name:"search",placeholder:"Search Here..",type:"text",onChange:this.handleChangeSearch,onBlur:this.handleBlur,onKeyPress:this.handleKeyPress,value:this.search})),p.a.createElement("div",{className:"col-md-2"},p.a.createElement("div",{className:"justify-content-end"},p.a.createElement("div",{className:"mb-4"},p.a.createElement(y.a,{to:"/invoice/create"},p.a.createElement(f.a,{className:"mb-3",variant:"primary"},"Add Invoice"))))),p.a.createElement(g.a,{defaultActiveKey:a.at(0),id:"uncontrolled-tab-example",unmountOnExit:!0,mountOnEnter:!0},a.map((function(t,a){return p.a.createElement(b.a,{eventKey:t.id,title:t.name.toUpperCase(),key:t.id,className:"capitalize"},p.a.createElement(x,Object.assign({companyId:t.id,year:e.state.year,search:e.state.search_s},e.props)))})))))))}}]),a}(u.Component);t.default=k},866:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return d}));var n=a(572),r=a.n(n),c=a(595),l=a(63),i=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/bill-detail/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/bill-get/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e){return l.a.post("/api/invoices/delete",e)},u=function(e){return console.log(e),l.a.put("/api/bill-detail/0",e)},p=function(e,t){return l.a.patch("/api/bill-detail/"+e,t)},m=function(){return l.a.get("/api/bill-to-list/all")},h=function(){return l.a.get("/api/bill-by-list/all")},d=function(e,t,a,n,r){return l.a.get("/api/bill-details-list/1?bill_by=".concat(e,"&bw=A&search_year=").concat(n,"&limit=").concat(t,"&offset=").concat(a*t,"&search_bill=").concat(r))}}}]);
//# sourceMappingURL=87.88c12775.chunk.js.map